<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <title>排行榜</title>
    <style>
      body {
        font-family: "Arial", sans-serif;
        background-color: #f4f4f9;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding-top: 40px;
      }

      .container {
        background: #ffffff;
        width: 700px;
        padding: 35px 40px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        margin-bottom: 25px;
        color: #333;
      }

      .switch-buttons {
        text-align: center;
        margin-bottom: 20px;
      }

      .btn {
        padding: 10px 16px;
        border: none;
        border-radius: 6px;
        font-size: 15px;
        cursor: pointer;
        margin-right: 10px;
        color: white;
        background-color: #007bff;
        transition: background 0.2s;
      }

      .btn:hover {
        background-color: #0056b3;
      }

      .gray-btn {
        background-color: #6c757d;
      }

      .gray-btn:hover {
        background-color: #545b62;
      }

      h2 {
        margin-top: 20px;
        margin-bottom: 10px;
        color: #333;
        cursor: pointer;
        padding: 8px 12px;
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        border-radius: 8px;
      }

      .section {
        margin-bottom: 15px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 5px;
        margin-bottom: 10px;
      }

      th,
      td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
      }

      th {
        background-color: #f0f0f0;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>排行榜</h1>

      <div class="switch-buttons">
        <button class="btn" onclick="showLeaderboard('batting')">
          打者排行榜
        </button>
        <button class="btn" onclick="showLeaderboard('pitching')">
          投手排行榜
        </button>
        <button class="btn gray-btn" onclick="location.href='dashboard.html'">
          回主畫面
        </button>
      </div>

      <!-- 打者排行榜 -->
      <div id="batting-leaderboards">
        <div class="section">
          <h2 onclick="toggleSection('hr-section')">全壘打排行榜 ▼</h2>
          <div id="hr-section">
            <table>
              <thead>
                <tr>
                  <th>排名</th>
                  <th>姓名</th>
                  <th>所屬球隊</th>
                  <th>全壘打數</th>
                </tr>
              </thead>
              <tbody id="hr-body"></tbody>
            </table>
          </div>
        </div>

        <div class="section">
          <h2 onclick="toggleSection('hits-section')">安打排行榜 ▼</h2>
          <div id="hits-section">
            <table>
              <thead>
                <tr>
                  <th>排名</th>
                  <th>姓名</th>
                  <th>所屬球隊</th>
                  <th>安打數</th>
                </tr>
              </thead>
              <tbody id="hits-body"></tbody>
            </table>
          </div>
        </div>

        <div class="section">
          <h2 onclick="toggleSection('rbis-section')">打點排行榜 ▼</h2>
          <div id="rbis-section">
            <table>
              <thead>
                <tr>
                  <th>排名</th>
                  <th>姓名</th>
                  <th>所屬球隊</th>
                  <th>打點數</th>
                </tr>
              </thead>
              <tbody id="rbis-body"></tbody>
            </table>
          </div>
        </div>

        <div class="section">
          <h2 onclick="toggleSection('avg-section')">打擊率排行榜 ▼</h2>
          <div id="avg-section">
            <table>
              <thead>
                <tr>
                  <th>排名</th>
                  <th>姓名</th>
                  <th>所屬球隊</th>
                  <th>打擊率</th>
                </tr>
              </thead>
              <tbody id="avg-body"></tbody>
            </table>
          </div>
        </div>

        <div class="section">
          <h2 onclick="toggleSection('sb-section')">盜壘排行榜 ▼</h2>
          <div id="sb-section">
            <table>
              <thead>
                <tr>
                  <th>排名</th>
                  <th>姓名</th>
                  <th>所屬球隊</th>
                  <th>盜壘數</th>
                </tr>
              </thead>
              <tbody id="sb-body"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- 投手排行榜 -->
      <div id="pitching-leaderboards" class="hidden">
        <div class="section">
          <h2 onclick="toggleSection('so-section')">三振排行榜 ▼</h2>
          <div id="so-section">
            <table>
              <thead>
                <tr>
                  <th>排名</th>
                  <th>姓名</th>
                  <th>所屬球隊</th>
                  <th>三振數</th>
                </tr>
              </thead>
              <tbody id="so-body"></tbody>
            </table>
          </div>
        </div>

        <div class="section">
          <h2 onclick="toggleSection('wins-section')">勝投排行榜 ▼</h2>
          <div id="wins-section">
            <table>
              <thead>
                <tr>
                  <th>排名</th>
                  <th>姓名</th>
                  <th>所屬球隊</th>
                  <th>勝投數</th>
                </tr>
              </thead>
              <tbody id="wins-body"></tbody>
            </table>
          </div>
        </div>

        <div class="section">
          <h2 onclick="toggleSection('era-section')">防禦率排行榜 ▼</h2>
          <div id="era-section">
            <table>
              <thead>
                <tr>
                  <th>排名</th>
                  <th>姓名</th>
                  <th>所屬球隊</th>
                  <th>防禦率</th>
                </tr>
              </thead>
              <tbody id="era-body"></tbody>
            </table>
          </div>
        </div>

        <div class="section">
          <h2 onclick="toggleSection('holds-section')">中繼成功排行榜 ▼</h2>
          <div id="holds-section">
            <table>
              <thead>
                <tr>
                  <th>排名</th>
                  <th>姓名</th>
                  <th>所屬球隊</th>
                  <th>中繼成功次數</th>
                </tr>
              </thead>
              <tbody id="holds-body"></tbody>
            </table>
          </div>
        </div>

        <div class="section">
          <h2 onclick="toggleSection('saves-section')">救援成功排行榜 ▼</h2>
          <div id="saves-section">
            <table>
              <thead>
                <tr>
                  <th>排名</th>
                  <th>姓名</th>
                  <th>所屬球隊</th>
                  <th>救援成功次數</th>
                </tr>
              </thead>
              <tbody id="saves-body"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <script>
      // 展開/收起功能
      function toggleSection(id) {
        const section = document.getElementById(id);
        section.classList.toggle("hidden");
      }

      // 切換排行榜類型
      function showLeaderboard(type) {
        const battingDiv = document.getElementById("batting-leaderboards");
        const pitchingDiv = document.getElementById("pitching-leaderboards");

        if (type === "batting") {
          battingDiv.classList.remove("hidden");
          pitchingDiv.classList.add("hidden");
        } else if (type === "pitching") {
          battingDiv.classList.add("hidden");
          pitchingDiv.classList.remove("hidden");
        }
      }

      // ================== 打者排行榜載入函數 ==================
      async function loadHomeRunLeaderboard() {
        const response = await fetch("/api/leaderboard/home_runs");
        const data = await response.json();
        const tbody = document.getElementById("hr-body");
        tbody.innerHTML = "";
        if (!data.success)
          return (tbody.innerHTML = `<tr><td colspan="4">${data.error}</td></tr>`);
        let rank = 1;
        data.result.forEach((item) => {
          tbody.innerHTML += `<tr>
                    <td>${rank}</td>
                    <td>${item.name}</td>
                    <td>${item.team_name}</td>
                    <td>${item.home_runs}</td>
                </tr>`;
          rank++;
        });
      }

      async function loadHitsLeaderboard() {
        const response = await fetch("/api/leaderboard/hits");
        const data = await response.json();
        const tbody = document.getElementById("hits-body");
        tbody.innerHTML = "";
        if (!data.success)
          return (tbody.innerHTML = `<tr><td colspan="4">${data.error}</td></tr>`);
        let rank = 1;
        data.result.forEach((item) => {
          tbody.innerHTML += `<tr>
                    <td>${rank}</td>
                    <td>${item.name}</td>
                    <td>${item.team_name}</td>
                    <td>${item.hits}</td>
                </tr>`;
          rank++;
        });
      }

      async function loadRBIsLeaderboard() {
        const response = await fetch("/api/leaderboard/rbis");
        const data = await response.json();
        const tbody = document.getElementById("rbis-body");
        tbody.innerHTML = "";
        if (!data.success)
          return (tbody.innerHTML = `<tr><td colspan="4">${data.error}</td></tr>`);
        let rank = 1;
        data.result.forEach((item) => {
          tbody.innerHTML += `<tr>
                    <td>${rank}</td>
                    <td>${item.name}</td>
                    <td>${item.team_name}</td>
                    <td>${item.rbis}</td>
                </tr>`;
          rank++;
        });
      }

      async function loadAvgLeaderboard() {
        const response = await fetch("/api/leaderboard/avg");
        const data = await response.json();
        const tbody = document.getElementById("avg-body");
        tbody.innerHTML = "";
        if (!data.success)
          return (tbody.innerHTML = `<tr><td colspan="4">${data.error}</td></tr>`);
        let rank = 1;
        data.result.forEach((item) => {
          tbody.innerHTML += `<tr>
                    <td>${rank}</td>
                    <td>${item.name}</td>
                    <td>${item.team_name}</td>
                    <td>${item.batting_avg}</td>
                </tr>`;
          rank++;
        });
      }

      async function loadSBLeaderboard() {
        const response = await fetch("/api/leaderboard/stolen_bases");
        const data = await response.json();
        const tbody = document.getElementById("sb-body");
        tbody.innerHTML = "";
        if (!data.success)
          return (tbody.innerHTML = `<tr><td colspan="4">${data.error}</td></tr>`);
        let rank = 1;
        data.result.forEach((item) => {
          tbody.innerHTML += `<tr>
                    <td>${rank}</td>
                    <td>${item.name}</td>
                    <td>${item.team_name}</td>
                    <td>${item.stolen_bases}</td>
                </tr>`;
          rank++;
        });
      }

      // ================== 投手排行榜載入函數 ==================
      async function loadStrikeoutsLeaderboard() {
        const response = await fetch("/api/leaderboard/strikeouts");
        const data = await response.json();
        const tbody = document.getElementById("so-body");
        tbody.innerHTML = "";
        if (!data.success)
          return (tbody.innerHTML = `<tr><td colspan="4">${data.error}</td></tr>`);
        let rank = 1;
        data.result.forEach((item) => {
          tbody.innerHTML += `<tr>
                    <td>${rank}</td>
                    <td>${item.name}</td>
                    <td>${item.team_name}</td>
                    <td>${item.strikeouts}</td>
                </tr>`;
          rank++;
        });
      }

      async function loadWinsLeaderboard() {
        const response = await fetch("/api/leaderboard/wins");
        const data = await response.json();
        const tbody = document.getElementById("wins-body");
        tbody.innerHTML = "";
        if (!data.success)
          return (tbody.innerHTML = `<tr><td colspan="4">${data.error}</td></tr>`);
        let rank = 1;
        data.result.forEach((item) => {
          tbody.innerHTML += `<tr>
                    <td>${rank}</td>
                    <td>${item.name}</td>
                    <td>${item.team_name}</td>
                    <td>${item.wins}</td>
                </tr>`;
          rank++;
        });
      }

      async function loadERALeaderboard() {
        const response = await fetch("/api/leaderboard/era");
        const data = await response.json();
        const tbody = document.getElementById("era-body");
        tbody.innerHTML = "";
        if (!data.success)
          return (tbody.innerHTML = `<tr><td colspan="4">${data.error}</td></tr>`);
        let rank = 1;
        data.result.forEach((item) => {
          tbody.innerHTML += `<tr>
                    <td>${rank}</td>
                    <td>${item.name}</td>
                    <td>${item.team_name}</td>
                    <td>${item.era}</td>
                </tr>`;
          rank++;
        });
      }

      async function loadHoldsLeaderboard() {
        const response = await fetch("/api/leaderboard/holds");
        const data = await response.json();
        const tbody = document.getElementById("holds-body");
        tbody.innerHTML = "";
        if (!data.success)
          return (tbody.innerHTML = `<tr><td colspan="4">${data.error}</td></tr>`);
        let rank = 1;
        data.result.forEach((item) => {
          tbody.innerHTML += `<tr>
                    <td>${rank}</td>
                <td>${item.name}</td>
                <td>${item.team_name}</td>
                <td>${item.holds}</td>
                </tr>`;
          rank++;
        });
      }

      async function loadSavesLeaderboard() {
        const response = await fetch("/api/leaderboard/saves");
        const data = await response.json();
        const tbody = document.getElementById("saves-body");
        tbody.innerHTML = "";
        if (!data.success)
          return (tbody.innerHTML = `<tr><td colspan="4">${data.error}</td></tr>`);

        let rank = 1;
        data.result.forEach((item) => {
          tbody.innerHTML += `<tr>
                    <td>${rank}</td>
                    <td>${item.name}</td>
                    <td>${item.team_name}</td>
                    <td>${item.saves}</td>
                </tr>`;
          rank++;
        });
      }

      // ================== 初始化載入排行榜 ==================
      loadHomeRunLeaderboard();
      loadHitsLeaderboard();
      loadRBIsLeaderboard();
      loadAvgLeaderboard();
      loadSBLeaderboard();

      loadStrikeoutsLeaderboard();
      loadWinsLeaderboard();
      loadERALeaderboard();
      loadHoldsLeaderboard();
      loadSavesLeaderboard();
    </script>
  </body>
</html>
