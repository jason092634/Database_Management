ä¸‹é¢åˆ†å…©éƒ¨åˆ†å›ç­”ä½ ï¼š
âœ… ç¬¬ä¸€éƒ¨åˆ†ï¼šè³‡æ–™åº«ç´¢å¼•å»ºè­°ï¼ˆéå¸¸é‡è¦ï¼‰

ä½ çš„è³‡æ–™åº«æ˜¯å…¸å‹çš„æ£’çƒç´€éŒ„ç³»çµ±ï¼ŒæŸ¥è©¢é‡é€šå¸¸é›†ä¸­åœ¨ï¼šçƒå“¡åç¨±æœå°‹ã€çƒéšŠåç¨±æœå°‹ã€
æŸ¥çƒå“¡è³½å­£æˆç¸¾ï¼ˆä¾ player_id + match.dateï¼‰ã€æŸ¥æŸå¤©çš„æ¯”è³½ï¼ˆä¾ match.dateï¼‰ã€
æŸ¥æŸå¤©æŸçƒéšŠçš„æ¯”è³½ï¼ˆä¾ team_id + match.dateï¼‰ã€æŸ¥å‡ºå ´çƒå“¡ï¼ˆmatch_player.match_idï¼‰

å› æ­¤ä»¥ä¸‹ç´¢å¼•èƒ½æå‡æ•ˆç‡ï¼š

ğŸ”¹ 1. Player ç›¸é—œç´¢å¼•
(1) æŸ¥çƒå“¡åç¨±ï¼ˆæ¨¡ç³Šæœå°‹ï¼‰

If using ILIKEï¼š
CREATE INDEX idx_player_name ON player (name);

å¦‚éœ€æ›´å¼· fuzzy searchï¼Œå¯ä»¥ä½¿ç”¨ pg_trgmï¼š
CREATE EXTENSION IF NOT EXISTS pg_trgm;
CREATE INDEX idx_player_name_trgm ON player USING gin (name gin_trgm_ops);

ğŸ”¹ 2. Team / League
CREATE INDEX idx_team_name ON team (team_name);
CREATE INDEX idx_league_name ON league (league_name);

ğŸ”¹ 3. Matchï¼ˆæœ€é‡è¦çš„ï¼‰
ä½ å¤§é‡ä¾æ“šæ—¥æœŸæŸ¥è©¢ â†’ å¿…å»ºç´¢å¼•
CREATE INDEX idx_match_date ON match (date);

æŸ¥çƒéšŠæ¯”è³½ä¹Ÿå¸¸ç”¨ team_idï¼š
CREATE INDEX idx_match_home_team ON match (home_team_id);
CREATE INDEX idx_match_away_team ON match (away_team_id);

ğŸ‘‰ å¯é€²éšå»ºç«‹è¤‡åˆç´¢å¼•ï¼š
CREATE INDEX idx_match_date_home ON match (date, home_team_id);
CREATE INDEX idx_match_date_away ON match (date, away_team_id);

ğŸ”¹ 4. Match_Player
è‹¥æŸ¥ã€Œæ¯”è³½å‡ºå ´çƒå“¡ã€
CREATE INDEX idx_match_player_match ON match_player (match_id);

å¸¸æŸ¥çƒå“¡çš„æ‰€æœ‰ç´€éŒ„ï¼š
CREATE INDEX idx_match_player_player ON match_player (player_id);

ğŸ”¹ 5. Followed Player / Followed Teamï¼ˆç”¨æ–¼è¿½è¹¤ç³»çµ±ï¼‰
CREATE INDEX idx_followed_player_user ON followed_player (user_id);
CREATE INDEX idx_followed_team_user ON followed_team (user_id);

âœ… ç¬¬äºŒéƒ¨åˆ†ï¼šæ–°å¢åŠŸèƒ½ï¼šæŸ¥è©¢çƒéšŠæœ¬èº«ï¼ˆå« Active æˆå“¡ï¼‰

ä½ æƒ³è¦ï¼šè¼¸å…¥çƒéšŠ â†’ å¾—åˆ°çƒéšŠè³‡è¨Š + è©²éšŠ active çš„çƒå“¡åå–®
ä»¥ä¸‹æŸ¥è©¢æœ€ç¬¦åˆä½ éœ€æ±‚ï¼š

â­ æŸ¥çƒéšŠè³‡è¨Š + Active æˆå“¡
ğŸ’¡ ä½ åªéœ€è¦è¼¸å…¥çƒéšŠåç¨±ï¼Œä¾‹å¦‚ 'Los Angeles Angels'
SELECT
    t.team_id,
    t.team_name,
    t.manager_name,
    t.team_status,
    l.league_name,

    p.player_id,
    p.name AS player_name,
    p.number,
    p.status AS player_status

FROM team t
LEFT JOIN league l
    ON t.league_id = l.league_id
LEFT JOIN player p
    ON p.team_id = t.team_id
   AND p.status = 'Active'

WHERE t.team_name = %s
ORDER BY p.number;

ğŸ“ æŸ¥è©¢çµæœæœƒåŒ…å«ï¼š
æ¬„ä½	èªªæ˜
team_id	çƒéšŠ ID
team_name	çƒéšŠåç¨±
manager_name	æ•™ç·´
team_status	Active / Inactive
league_name	æ‰€å±¬è¯ç›Ÿ
player_id	çƒå“¡ ID
player_name	active çƒå“¡åç¨±
number	èƒŒè™Ÿ
player_status	åªæœƒæ˜¯ Activeï¼ˆå› ç‚ºæ¢ä»¶éæ¿¾äº†ï¼‰

ğŸ‘ Bonusï¼šå¦‚æœä½ è¦é¡¯ç¤ºã€ŒçƒéšŠåŸºæœ¬è³‡æ–™ã€+ã€Œçƒå“¡æ¸…å–®ã€åˆ†é–‹ï¼Œä½ å¯ä»¥æ‹†æˆå…©å€‹ queryï¼š

(A) æŸ¥çƒéšŠè³‡è¨Š
SELECT
    t.team_id,
    t.team_name,
    t.manager_name,
    t.team_status,
    l.league_name
FROM team t
LEFT JOIN league l
    ON l.league_id = t.league_id
WHERE t.team_name = %s;

(B) æŸ¥çƒéšŠ active çƒå“¡åˆ—è¡¨
SELECT
    p.player_id,
    p.name AS player_name,
    p.number,
    p.status
FROM player p
JOIN team t
    ON p.team_id = t.team_id
WHERE t.team_name = %s
  AND p.status = 'Active'
ORDER BY p.number;